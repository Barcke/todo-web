{"version":3,"sources":["../../../../../../../Desktop/web/calendar-design-and-interaction/node_modules/.pnpm/next%4016.0.10_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../Desktop/web/calendar-design-and-interaction/app/login/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\"\n\nimport { useState, useEffect, Suspense } from \"react\"\nimport { useRouter, useSearchParams } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { z } from \"zod\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { ApiError } from \"@/lib/api-client\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Form, FormField, FormItem, FormMessage } from \"@/components/ui/form\"\nimport { toast } from \"sonner\"\n\nconst loginSchema = z.object({\n  username: z.string().min(1, \"请输入用户名\"),\n  password: z.string().min(1, \"请输入密码\"),\n})\n\ntype LoginFormData = z.infer<typeof loginSchema>\n\nfunction LoginForm() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { login, isAuthenticated } = useAuth()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const form = useForm<LoginFormData>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n    },\n  })\n\n  // 如果已登录，重定向到主页\n  useEffect(() => {\n    if (isAuthenticated) {\n      const redirect = searchParams.get(\"redirect\")\n      router.push(redirect || \"/\")\n    }\n  }, [isAuthenticated, router, searchParams])\n\n  // 如果已登录，不渲染表单\n  if (isAuthenticated) {\n    return null\n  }\n\n  const onSubmit = async (data: LoginFormData) => {\n    setIsLoading(true)\n    try {\n      await login(data)\n      toast.success(\"登录成功\")\n      // 如果有重定向参数，跳转到指定页面，否则跳转到主页\n      const redirect = searchParams.get(\"redirect\")\n      router.push(redirect || \"/\")\n    } catch (error) {\n      if (error instanceof ApiError) {\n        toast.error(error.message || \"登录失败\")\n      } else {\n        toast.error(\"登录失败，请稍后重试\")\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground\">登录</h1>\n          <p className=\"mt-2 text-sm text-muted-foreground\">登录您的账户以继续</p>\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"username\"\n              render={({ field }) => (\n                <FormItem>\n                  <Label htmlFor=\"username\">用户名</Label>\n                  <Input\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"请输入用户名\"\n                    {...field}\n                    disabled={isLoading}\n                  />\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"password\"\n              render={({ field }) => (\n                <FormItem>\n                  <Label htmlFor=\"password\">密码</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"请输入密码\"\n                    {...field}\n                    disabled={isLoading}\n                  />\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n              {isLoading ? \"登录中...\" : \"登录\"}\n            </Button>\n          </form>\n        </Form>\n\n        <div className=\"text-center text-sm\">\n          <span className=\"text-muted-foreground\">还没有账户？</span>{\" \"}\n          <Link href=\"/register\" className=\"text-primary hover:underline font-medium\">\n            立即注册\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default function LoginPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-muted-foreground\">加载中...</div>\n      </div>\n    }>\n      <LoginForm />\n    </Suspense>\n  )\n}\n\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0]}