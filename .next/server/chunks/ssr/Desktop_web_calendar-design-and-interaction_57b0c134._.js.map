{"version":3,"sources":["../../../../../../../Desktop/web/calendar-design-and-interaction/node_modules/.pnpm/next%4016.0.10_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../../../../Desktop/web/calendar-design-and-interaction/app/register/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { z } from \"zod\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { ApiError } from \"@/lib/api-client\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Form, FormField, FormItem, FormMessage } from \"@/components/ui/form\"\nimport { toast } from \"sonner\"\n\nconst registerSchema = z\n  .object({\n    username: z.string().min(1, \"请输入用户名\").min(3, \"用户名至少3个字符\"),\n    password: z.string().min(1, \"请输入密码\").min(6, \"密码至少6个字符\"),\n    confirmPassword: z.string().min(1, \"请确认密码\"),\n  })\n  .refine((data) => data.password === data.confirmPassword, {\n    message: \"两次输入的密码不一致\",\n    path: [\"confirmPassword\"],\n  })\n\ntype RegisterFormData = z.infer<typeof registerSchema>\n\nexport default function RegisterPage() {\n  const router = useRouter()\n  const { register, isAuthenticated } = useAuth()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const form = useForm<RegisterFormData>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n    },\n  })\n\n  // 如果已登录，重定向到主页\n  useEffect(() => {\n    if (isAuthenticated) {\n      router.push(\"/\")\n    }\n  }, [isAuthenticated, router])\n\n  // 如果已登录，不渲染表单\n  if (isAuthenticated) {\n    return null\n  }\n\n  const onSubmit = async (data: RegisterFormData) => {\n    setIsLoading(true)\n    try {\n      await register({\n        username: data.username,\n        password: data.password,\n      })\n      toast.success(\"注册成功\")\n      router.push(\"/\")\n    } catch (error) {\n      if (error instanceof ApiError) {\n        toast.error(error.message || \"注册失败\")\n      } else {\n        toast.error(\"注册失败，请稍后重试\")\n      }\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background px-4\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-foreground\">注册</h1>\n          <p className=\"mt-2 text-sm text-muted-foreground\">创建新账户</p>\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"username\"\n              render={({ field }) => (\n                <FormItem>\n                  <Label htmlFor=\"username\">用户名</Label>\n                  <Input\n                    id=\"username\"\n                    type=\"text\"\n                    placeholder=\"请输入用户名（至少3个字符）\"\n                    {...field}\n                    disabled={isLoading}\n                  />\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"password\"\n              render={({ field }) => (\n                <FormItem>\n                  <Label htmlFor=\"password\">密码</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"请输入密码（至少6个字符）\"\n                    {...field}\n                    disabled={isLoading}\n                  />\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"confirmPassword\"\n              render={({ field }) => (\n                <FormItem>\n                  <Label htmlFor=\"confirmPassword\">确认密码</Label>\n                  <Input\n                    id=\"confirmPassword\"\n                    type=\"password\"\n                    placeholder=\"请再次输入密码\"\n                    {...field}\n                    disabled={isLoading}\n                  />\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n              {isLoading ? \"注册中...\" : \"注册\"}\n            </Button>\n          </form>\n        </Form>\n\n        <div className=\"text-center text-sm\">\n          <span className=\"text-muted-foreground\">已有账户？</span>{\" \"}\n          <Link href=\"/login\" className=\"text-primary hover:underline font-medium\">\n            立即登录\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0]}