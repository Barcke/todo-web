{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/toast-notifications.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\n\ninterface ToastMessage {\n  id: string\n  message: string\n  type: \"success\" | \"achievement\"\n}\n\nexport function ToastNotifications() {\n  const [toasts, setToasts] = useState<ToastMessage[]>([])\n\n  useEffect(() => {\n    const handleToast = (event: CustomEvent) => {\n      const id = Math.random().toString(36).substring(7)\n      const newToast: ToastMessage = {\n        id,\n        message: event.detail.message,\n        type: event.detail.type,\n      }\n\n      setToasts((prev) => [...prev, newToast])\n\n      setTimeout(() => {\n        setToasts((prev) => prev.filter((t) => t.id !== id))\n      }, 3000)\n    }\n\n    window.addEventListener(\"show-toast\", handleToast as EventListener)\n    return () => window.removeEventListener(\"show-toast\", handleToast as EventListener)\n  }, [])\n\n  return (\n    <div className=\"fixed top-4 left-1/2 -translate-x-1/2 z-50 space-y-2 pointer-events-none\">\n      {toasts.map((toast) => (\n        <div\n          key={toast.id}\n          className={`px-4 py-2.5 rounded-lg shadow-lg backdrop-blur-sm animate-in slide-in-from-top fade-in duration-300 ${\n            toast.type === \"achievement\"\n              ? \"bg-foreground text-background\"\n              : \"bg-background/95 text-foreground border border-border/40\"\n          }`}\n        >\n          <p className=\"text-sm font-medium\">{toast.message}</p>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+YAAQ,EAAiB,EAAE;IAEvD,IAAA,gZAAS,EAAC;QACR,MAAM,cAAc,CAAC;YACnB,MAAM,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;YAChD,MAAM,WAAyB;gBAC7B;gBACA,SAAS,MAAM,MAAM,CAAC,OAAO;gBAC7B,MAAM,MAAM,MAAM,CAAC,IAAI;YACzB;YAEA,UAAU,CAAC,OAAS;uBAAI;oBAAM;iBAAS;YAEvC,WAAW;gBACT,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAClD,GAAG;QACL;QAEA,OAAO,gBAAgB,CAAC,cAAc;QACtC,OAAO,IAAM,OAAO,mBAAmB,CAAC,cAAc;IACxD,GAAG,EAAE;IAEL,qBACE,4aAAC;QAAI,WAAU;kBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,4aAAC;gBAEC,WAAW,CAAC,oGAAoG,EAC9G,MAAM,IAAI,KAAK,gBACX,kCACA,4DACJ;0BAEF,cAAA,4aAAC;oBAAE,WAAU;8BAAuB,MAAM,OAAO;;;;;;eAP5C,MAAM,EAAE;;;;;;;;;;AAYvB"}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/lib/config.ts"],"sourcesContent":["// 项目配置文件\nexport const config = {\n  // 后端 API 基础 URL（用于 Next.js API 代理）\n  backendApiBaseUrl: \"http://localhost:6158/api\",\n  // 前端 API 基础 URL（通过 Next.js API 路由代理）\n  // 在浏览器中使用相对路径，避免 CORS 问题\n  apiBaseUrl: typeof window !== \"undefined\" ? \"/api/proxy\" : \"http://localhost:6158/api\",\n} as const\n\n"],"names":[],"mappings":"AAAA,SAAS;;;;;AACF,MAAM,SAAS;IACpB,mCAAmC;IACnC,mBAAmB;IACnB,qCAAqC;IACrC,yBAAyB;IACzB,YAAY,sCAAgC,0BAAe;AAC7D"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/lib/api-client.ts"],"sourcesContent":["import type { ApiResponse, LoginRequest, RegisterRequest, User, UpdateProfileRequest, ChangePasswordRequest, LoginResponse } from \"@/types/user\"\nimport type {\n  TodoResponse,\n  TodoCreateRequest,\n  TodoUpdateRequest,\n  CalendarDayResponse,\n  TemplateResponse,\n  TemplateCreateRequest,\n  TodoTypeResponse,\n  TodoTypeRequest,\n  MonthStatisticsResponse,\n  TypeStatisticsResponse,\n} from \"@/types/task\"\nimport { config } from \"@/lib/config\"\n\n// 在浏览器中使用代理路径，在服务端直接使用后端 URL\nconst API_BASE_URL = typeof window !== \"undefined\" ? config.apiBaseUrl : config.backendApiBaseUrl\n\n// Token 存储键名\nconst TOKEN_KEY = \"barcke_token\"\n\n// 获取存储的 token\nexport function getToken(): string | null {\n  if (typeof window === \"undefined\") return null\n  return localStorage.getItem(TOKEN_KEY)\n}\n\n// 设置 token\nexport function setToken(token: string): void {\n  if (typeof window === \"undefined\") return\n  localStorage.setItem(TOKEN_KEY, token)\n}\n\n// 清除 token\nexport function clearToken(): void {\n  if (typeof window === \"undefined\") return\n  localStorage.removeItem(TOKEN_KEY)\n}\n\n// API 错误类\nexport class ApiError extends Error {\n  constructor(\n    message: string,\n    public status: number,\n    public response?: any\n  ) {\n    super(message)\n    this.name = \"ApiError\"\n  }\n}\n\n// 统一的请求方法\nasync function request<T>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<ApiResponse<T>> {\n  const token = getToken()\n  \n  const headers: Record<string, string> = {\n    ...(options.headers as Record<string, string>),\n  }\n\n  // 如果不是 FormData，设置 Content-Type\n  if (!(options.body instanceof FormData)) {\n    headers[\"Content-Type\"] = \"application/json\"\n  }\n\n  // 如果有 token，添加认证 header\n  if (token) {\n    headers[\"BARCKE-TOKEN\"] = token\n  }\n\n  const url = `${API_BASE_URL}${endpoint}`\n  \n  try {\n    const response = await fetch(url, {\n      ...options,\n      headers,\n    })\n\n    const data = await response.json()\n\n    if (!response.ok) {\n      throw new ApiError(\n        data.message || \"请求失败\",\n        response.status,\n        data\n      )\n    }\n\n    return data\n  } catch (error) {\n    if (error instanceof ApiError) {\n      throw error\n    }\n    throw new ApiError(\"网络错误，请检查网络连接\", 0, error)\n  }\n}\n\n// 构建查询字符串\nfunction buildQueryString(params: Record<string, string | undefined>): string {\n  const searchParams = new URLSearchParams()\n  Object.entries(params).forEach(([key, value]) => {\n    if (value !== undefined && value !== null && value !== \"\") {\n      searchParams.append(key, value)\n    }\n  })\n  const query = searchParams.toString()\n  return query ? `?${query}` : \"\"\n}\n\n// API 客户端方法\nexport const apiClient = {\n  // 用户注册\n  async register(data: RegisterRequest): Promise<ApiResponse<{ id: string; username: string }>> {\n    return request(\"/auth/register\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 用户登录\n  async login(data: LoginRequest): Promise<ApiResponse<LoginResponse>> {\n    return request(\"/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 用户登出\n  async logout(): Promise<ApiResponse<void>> {\n    return request(\"/auth/logout\", {\n      method: \"POST\",\n    })\n  },\n\n  // 获取当前用户信息\n  async getProfile(): Promise<ApiResponse<User>> {\n    return request(\"/user/profile\", {\n      method: \"GET\",\n    })\n  },\n\n  // 更新用户信息\n  async updateProfile(data: UpdateProfileRequest): Promise<ApiResponse<User>> {\n    return request(\"/user/profile\", {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 修改密码\n  async changePassword(data: ChangePasswordRequest): Promise<ApiResponse<void>> {\n    return request(\"/user/password\", {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // ========== Todo 模块 ==========\n  \n  // 创建 Todo\n  async createTodo(data: TodoCreateRequest): Promise<ApiResponse<TodoResponse>> {\n    return request(\"/todos\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 查询 Todo 列表\n  async getTodos(params?: {\n    startDate?: string\n    endDate?: string\n    status?: \"pending\" | \"completed\"\n  }): Promise<ApiResponse<TodoResponse[]>> {\n    const query = buildQueryString({\n      startDate: params?.startDate,\n      endDate: params?.endDate,\n      status: params?.status,\n    })\n    return request(`/todos${query}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 获取 Todo 详情\n  async getTodoById(id: string): Promise<ApiResponse<TodoResponse>> {\n    return request(`/todos/${id}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 更新 Todo\n  async updateTodo(id: string, data: TodoUpdateRequest): Promise<ApiResponse<TodoResponse>> {\n    return request(`/todos/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 删除 Todo\n  async deleteTodo(id: string): Promise<ApiResponse<string>> {\n    return request(`/todos/${id}`, {\n      method: \"DELETE\",\n    })\n  },\n\n  // 标记完成\n  async completeTodo(id: string): Promise<ApiResponse<TodoResponse>> {\n    return request(`/todos/${id}/complete`, {\n      method: \"POST\",\n    })\n  },\n\n  // ========== Calendar 模块 ==========\n\n  // 获取月视图数据\n  async getMonthView(yearMonth: string): Promise<ApiResponse<CalendarDayResponse[]>> {\n    return request(`/calendar/month${buildQueryString({ yearMonth })}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 获取日视图数据\n  async getDayView(date: string): Promise<ApiResponse<TodoResponse[]>> {\n    return request(`/calendar/day${buildQueryString({ date })}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 获取周视图数据\n  async getWeekView(weekStartDate: string): Promise<ApiResponse<TodoResponse[]>> {\n    return request(`/calendar/week${buildQueryString({ weekStartDate })}`, {\n      method: \"GET\",\n    })\n  },\n\n  // ========== Template 模块 ==========\n\n  // 创建模板\n  async createTemplate(data: TemplateCreateRequest): Promise<ApiResponse<TemplateResponse>> {\n    return request(\"/templates\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 获取模板列表\n  async getTemplates(): Promise<ApiResponse<TemplateResponse[]>> {\n    return request(\"/templates\", {\n      method: \"GET\",\n    })\n  },\n\n  // 获取模板详情\n  async getTemplateById(id: string): Promise<ApiResponse<TemplateResponse>> {\n    return request(`/templates/${id}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 更新模板\n  async updateTemplate(id: string, data: TemplateCreateRequest): Promise<ApiResponse<TemplateResponse>> {\n    return request(`/templates/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 删除模板\n  async deleteTemplate(id: string): Promise<ApiResponse<string>> {\n    return request(`/templates/${id}`, {\n      method: \"DELETE\",\n    })\n  },\n\n  // 添加模板项\n  async addTemplateTodo(templateId: string, title: string, typeId?: string): Promise<ApiResponse<any>> {\n    return request(`/templates/${templateId}/todos${buildQueryString({ title, typeId })}`, {\n      method: \"POST\",\n    })\n  },\n\n  // 更新模板项\n  async updateTemplateTodo(\n    templateId: string,\n    todoId: string,\n    params?: { title?: string; typeId?: string }\n  ): Promise<ApiResponse<any>> {\n    return request(`/templates/${templateId}/todos/${todoId}${buildQueryString(params || {})}`, {\n      method: \"PUT\",\n    })\n  },\n\n  // 删除模板项\n  async deleteTemplateTodo(templateId: string, todoId: string): Promise<ApiResponse<string>> {\n    return request(`/templates/${templateId}/todos/${todoId}`, {\n      method: \"DELETE\",\n    })\n  },\n\n  // 应用模板生成 Todo\n  async applyTemplate(templateId: string, date: string, time?: string): Promise<ApiResponse<TodoResponse[]>> {\n    return request(`/templates/${templateId}/apply${buildQueryString({ date, time })}`, {\n      method: \"POST\",\n    })\n  },\n\n  // ========== Type 模块 ==========\n\n  // 创建类型\n  async createType(data: TodoTypeRequest): Promise<ApiResponse<TodoTypeResponse>> {\n    return request(\"/todo-types\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 获取用户所有类型\n  async getTypes(): Promise<ApiResponse<TodoTypeResponse[]>> {\n    return request(\"/todo-types\", {\n      method: \"GET\",\n    })\n  },\n\n  // 根据ID查询类型\n  async getTypeById(id: string): Promise<ApiResponse<TodoTypeResponse>> {\n    return request(`/todo-types/${id}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 更新类型\n  async updateType(id: string, data: TodoTypeRequest): Promise<ApiResponse<TodoTypeResponse>> {\n    return request(`/todo-types/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    })\n  },\n\n  // 删除类型\n  async deleteType(id: string): Promise<ApiResponse<string>> {\n    return request(`/todo-types/${id}`, {\n      method: \"DELETE\",\n    })\n  },\n\n  // ========== Statistics 模块 ==========\n\n  // 月度统计\n  async getMonthStatistics(yearMonth: string): Promise<ApiResponse<MonthStatisticsResponse>> {\n    return request(`/statistics/month${buildQueryString({ yearMonth })}`, {\n      method: \"GET\",\n    })\n  },\n\n  // 类型统计\n  async getTypeStatistics(yearMonth: string): Promise<ApiResponse<TypeStatisticsResponse[]>> {\n    return request(`/statistics/type${buildQueryString({ yearMonth })}`, {\n      method: \"GET\",\n    })\n  },\n\n  // ========== File 模块 ==========\n\n  // 文件上传\n  async uploadFile(file: File, todoId?: string): Promise<ApiResponse<{\n    fileId: string\n    url: string\n    fileName: string\n    fileSize: number\n    type: string\n  }>> {\n    const formData = new FormData()\n    formData.append(\"file\", file)\n    \n    const query = todoId ? buildQueryString({ todoId }) : \"\"\n    return request(`/files/upload${query}`, {\n      method: \"POST\",\n      body: formData,\n    })\n  },\n\n  // 文件读取（返回文件流）\n  async getFile(fileId: string): Promise<Blob> {\n    const token = getToken()\n    const headers: Record<string, string> = {}\n    \n    if (token) {\n      headers[\"BARCKE-TOKEN\"] = token\n    }\n\n    const url = `${API_BASE_URL}/files/${fileId}`\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers,\n    })\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ message: \"文件读取失败\" }))\n      throw new ApiError(error.message || \"文件读取失败\", response.status, error)\n    }\n\n    return response.blob()\n  },\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport type { User, LoginRequest, RegisterRequest, UpdateProfileRequest, ChangePasswordRequest } from \"@/types/user\"\nimport { apiClient, getToken, setToken, clearToken } from \"@/lib/api-client\"\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  isAuthenticated: boolean\n  login: (data: LoginRequest) => Promise<void>\n  register: (data: RegisterRequest) => Promise<void>\n  logout: () => Promise<void>\n  updateProfile: (data: UpdateProfileRequest) => Promise<void>\n  changePassword: (data: ChangePasswordRequest) => Promise<void>\n  refreshUser: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const router = useRouter()\n\n  // 初始化时检查是否有 token 并获取用户信息\n  useEffect(() => {\n    const initAuth = async () => {\n      const token = getToken()\n      if (token) {\n        try {\n          const response = await apiClient.getProfile()\n          setUser(response.data)\n        } catch (error) {\n          // Token 无效，清除\n          clearToken()\n        }\n      }\n      setLoading(false)\n    }\n\n    initAuth()\n  }, [])\n\n  // 登录\n  const login = useCallback(async (data: LoginRequest) => {\n    const response = await apiClient.login(data)\n    setToken(response.data.token)\n    setUser(response.data.user)\n  }, [])\n\n  // 注册\n  const register = useCallback(async (data: RegisterRequest) => {\n    await apiClient.register(data)\n    // 注册成功后自动登录\n    await login(data)\n  }, [login])\n\n  // 登出\n  const logout = useCallback(async () => {\n    try {\n      await apiClient.logout()\n    } catch (error) {\n      // 即使登出失败也清除本地状态\n    } finally {\n      clearToken()\n      setUser(null)\n      router.push(\"/login\")\n    }\n  }, [router])\n\n  // 更新用户信息\n  const updateProfile = useCallback(async (data: UpdateProfileRequest) => {\n    const response = await apiClient.updateProfile(data)\n    setUser(response.data)\n  }, [])\n\n  // 修改密码\n  const changePassword = useCallback(async (data: ChangePasswordRequest) => {\n    await apiClient.changePassword(data)\n  }, [])\n\n  // 刷新用户信息\n  const refreshUser = useCallback(async () => {\n    try {\n      const response = await apiClient.getProfile()\n      setUser(response.data)\n    } catch (error) {\n      // 如果获取失败，清除状态\n      clearToken()\n      setUser(null)\n    }\n  }, [])\n\n  const value: AuthContextType = {\n    user,\n    loading,\n    isAuthenticated: !!user,\n    login,\n    register,\n    logout,\n    updateProfile,\n    changePassword,\n    refreshUser,\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAmBA,MAAM,4BAAc,IAAA,oZAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+YAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+YAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,6UAAS;IAExB,0BAA0B;IAC1B,IAAA,gZAAS,EAAC;QACR,MAAM,WAAW;YACf,MAAM,QAAQ,IAAA,8LAAQ;YACtB,IAAI,OAAO;gBACT,IAAI;oBACF,MAAM,WAAW,MAAM,+LAAS,CAAC,UAAU;oBAC3C,QAAQ,SAAS,IAAI;gBACvB,EAAE,OAAO,OAAO;oBACd,cAAc;oBACd,IAAA,gMAAU;gBACZ;YACF;YACA,WAAW;QACb;QAEA;IACF,GAAG,EAAE;IAEL,KAAK;IACL,MAAM,QAAQ,IAAA,kZAAW,EAAC,OAAO;QAC/B,MAAM,WAAW,MAAM,+LAAS,CAAC,KAAK,CAAC;QACvC,IAAA,8LAAQ,EAAC,SAAS,IAAI,CAAC,KAAK;QAC5B,QAAQ,SAAS,IAAI,CAAC,IAAI;IAC5B,GAAG,EAAE;IAEL,KAAK;IACL,MAAM,WAAW,IAAA,kZAAW,EAAC,OAAO;QAClC,MAAM,+LAAS,CAAC,QAAQ,CAAC;QACzB,YAAY;QACZ,MAAM,MAAM;IACd,GAAG;QAAC;KAAM;IAEV,KAAK;IACL,MAAM,SAAS,IAAA,kZAAW,EAAC;QACzB,IAAI;YACF,MAAM,+LAAS,CAAC,MAAM;QACxB,EAAE,OAAO,OAAO;QACd,gBAAgB;QAClB,SAAU;YACR,IAAA,gMAAU;YACV,QAAQ;YACR,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;KAAO;IAEX,SAAS;IACT,MAAM,gBAAgB,IAAA,kZAAW,EAAC,OAAO;QACvC,MAAM,WAAW,MAAM,+LAAS,CAAC,aAAa,CAAC;QAC/C,QAAQ,SAAS,IAAI;IACvB,GAAG,EAAE;IAEL,OAAO;IACP,MAAM,iBAAiB,IAAA,kZAAW,EAAC,OAAO;QACxC,MAAM,+LAAS,CAAC,cAAc,CAAC;IACjC,GAAG,EAAE;IAEL,SAAS;IACT,MAAM,cAAc,IAAA,kZAAW,EAAC;QAC9B,IAAI;YACF,MAAM,WAAW,MAAM,+LAAS,CAAC,UAAU;YAC3C,QAAQ,SAAS,IAAI;QACvB,EAAE,OAAO,OAAO;YACd,cAAc;YACd,IAAA,gMAAU;YACV,QAAQ;QACV;IACF,GAAG,EAAE;IAEL,MAAM,QAAyB;QAC7B;QACA;QACA,iBAAiB,CAAC,CAAC;QACnB;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,4aAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,iZAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/ui/sonner.tsx"],"sourcesContent":["'use client'\n\nimport { useTheme } from 'next-themes'\nimport { Toaster as Sonner, ToasterProps } from 'sonner'\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,kWAAQ;IAErC,qBACE,4aAAC,iVAAM;QACL,OAAO;QACP,WAAU;QACV,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf"}}]
}