{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/day-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Task } from \"@/types/task\"\nimport { Check } from \"lucide-react\"\nimport { useMemo } from \"react\"\n\ninterface DayViewProps {\n  tasks: Task[]\n  selectedDate: Date\n  onTaskClick: (task: Task) => void\n}\n\nexport function DayView({ tasks, selectedDate, onTaskClick }: DayViewProps) {\n  const hours = Array.from({ length: 24 }, (_, i) => i)\n\n  const selectedDateStr = selectedDate.toISOString().split(\"T\")[0]\n  const todayTasks = tasks.filter((t) => t.date === selectedDateStr)\n\n  const stats = useMemo(() => {\n    const total = todayTasks.length\n    const completed = todayTasks.filter((t) => t.completed).length\n    const byCategory = todayTasks.reduce(\n      (acc, task) => {\n        const cat = task.categoryId || \"uncategorized\"\n        if (!acc[cat]) acc[cat] = { total: 0, completed: 0 }\n        acc[cat].total++\n        if (task.completed) acc[cat].completed++\n        return acc\n      },\n      {} as Record<string, { total: number; completed: number }>,\n    )\n\n    return { total, completed, byCategory }\n  }, [todayTasks])\n\n  const getTasksForHour = (hour: number) => {\n    const hourStr = hour.toString().padStart(2, \"0\")\n    return todayTasks.filter((task) => task.time.startsWith(hourStr))\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-2xl p-4 border-2 border-foreground/10\">\n        {stats.total > 0 ? (\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-bold text-foreground/80\">Today's Progress</span>\n              <span className=\"text-xl font-bold text-foreground\">\n                {stats.completed}/{stats.total}\n              </span>\n            </div>\n            {/* Visual progress bar with hand-drawn style */}\n            <div className=\"h-2 bg-foreground/10 rounded-full overflow-hidden\">\n              <div\n                className=\"h-full bg-gradient-to-r from-green-400 to-blue-500 rounded-full transition-all duration-500\"\n                style={{ width: `${(stats.completed / stats.total) * 100}%` }}\n              />\n            </div>\n            {/* Category breakdown */}\n            {Object.keys(stats.byCategory).length > 0 && (\n              <div className=\"flex gap-2 flex-wrap mt-3\">\n                {Object.entries(stats.byCategory).map(([cat, data]) => (\n                  <div key={cat} className=\"text-[10px] bg-background/60 rounded-full px-2 py-1 font-medium\">\n                    {cat}: {data.completed}/{data.total}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ) : (\n          <p className=\"text-center py-8 text-sm font-handwriting text-muted-foreground\">\n            No tasks today - enjoy your free time! ☀️\n          </p>\n        )}\n      </div>\n\n      {/* Timeline */}\n      {stats.total > 0 && (\n        <div className=\"space-y-0 bg-muted/10 rounded-2xl border border-border/40 overflow-hidden\">\n          {hours.map((hour) => {\n            const hourTasks = getTasksForHour(hour)\n            if (hourTasks.length === 0) return null\n\n            return (\n              <div key={hour} className=\"flex border-b border-border/30 last:border-0\">\n                <div className=\"w-16 flex-shrink-0 py-4 px-3 text-xs text-muted-foreground font-semibold\">\n                  {hour.toString().padStart(2, \"0\")}:00\n                </div>\n                <div className=\"flex-1 py-3 pr-3 space-y-2\">\n                  {hourTasks.map((task) => (\n                    <button\n                      key={task.id}\n                      onClick={() => onTaskClick(task)}\n                      className={`w-full text-left px-4 py-3 rounded-xl transition-all active:scale-[0.98] border ${\n                        task.completed\n                          ? \"text-muted-foreground bg-muted/20 border-transparent\"\n                          : \"text-foreground bg-background border-border/40 shadow-sm active:shadow\"\n                      }`}\n                    >\n                      <div className=\"flex items-center justify-between gap-3\">\n                        <span className=\"text-sm font-medium leading-relaxed\">{task.title}</span>\n                        {task.completed && <Check className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />}\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/week-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Task } from \"@/types/task\"\nimport { Check } from \"lucide-react\"\nimport { useMemo } from \"react\"\n\ninterface WeekViewProps {\n  tasks: Task[]\n  selectedDate: Date\n  onTaskClick: (task: Task) => void\n}\n\nexport function WeekView({ tasks, selectedDate, onTaskClick }: WeekViewProps) {\n  const weekDays = useMemo(() => {\n    const days = []\n    const currentDay = new Date(selectedDate)\n    const dayOfWeek = currentDay.getDay()\n    const monday = new Date(currentDay)\n    monday.setDate(currentDay.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1))\n\n    for (let i = 0; i < 7; i++) {\n      const day = new Date(monday)\n      day.setDate(monday.getDate() + i)\n      days.push(day)\n    }\n    return days\n  }, [selectedDate])\n\n  const stats = useMemo(() => {\n    const weekDates = weekDays.map((d) => d.toISOString().split(\"T\")[0])\n    const weekTasks = tasks.filter((t) => weekDates.includes(t.date))\n    const total = weekTasks.length\n    const completed = weekTasks.filter((t) => t.completed).length\n    return { total, completed }\n  }, [tasks, weekDays])\n\n  const getTasksForDay = (date: Date) => {\n    const dateStr = date.toISOString().split(\"T\")[0]\n    return tasks.filter((t) => t.date === dateStr)\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Stats */}\n      <div className=\"text-xs text-muted-foreground\">\n        {stats.total > 0 ? (\n          <p>\n            本周共有 {stats.total} 件待办，已完成 {stats.completed} 件\n          </p>\n        ) : (\n          <p className=\"text-center py-16 text-sm\">本周暂无待办，享受轻松时光吧~</p>\n        )}\n      </div>\n\n      {/* Week Grid - Horizontal scrollable cards */}\n      {stats.total > 0 && (\n        <div className=\"overflow-x-auto -mx-4 px-4 pb-2\">\n          <div className=\"flex gap-3 snap-x snap-mandatory\">\n            {weekDays.map((day) => {\n              const dayTasks = getTasksForDay(day)\n              const isToday = day.toDateString() === new Date().toDateString()\n\n              return (\n                <div\n                  key={day.toISOString()}\n                  className={`flex-shrink-0 w-[160px] snap-center rounded-2xl border transition-all ${\n                    isToday ? \"border-foreground/30 bg-muted/40 shadow-sm\" : \"border-border/40 bg-muted/10\"\n                  } p-4`}\n                >\n                  <div className=\"text-center mb-4\">\n                    <div className=\"text-xs text-muted-foreground font-medium\">\n                      {day.toLocaleDateString(\"zh-CN\", { weekday: \"short\" })}\n                    </div>\n                    <div className={`text-2xl font-bold mt-1 ${isToday ? \"text-foreground\" : \"text-foreground/80\"}`}>\n                      {day.getDate()}\n                    </div>\n                    {dayTasks.length > 0 && (\n                      <div className=\"text-[10px] text-muted-foreground mt-1\">\n                        {dayTasks.filter((t) => t.completed).length}/{dayTasks.length}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"space-y-2\">\n                    {dayTasks.length === 0 ? (\n                      <div className=\"text-center py-6 text-xs text-muted-foreground\">无任务</div>\n                    ) : (\n                      dayTasks.map((task) => (\n                        <button\n                          key={task.id}\n                          onClick={() => onTaskClick(task)}\n                          className={`w-full text-left px-3 py-2.5 rounded-xl text-xs transition-all active:scale-95 ${\n                            task.completed\n                              ? \"text-muted-foreground bg-muted/30\"\n                              : \"text-foreground bg-background shadow-sm border border-border/40\"\n                          }`}\n                        >\n                          <div className=\"flex items-start justify-between gap-2\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"text-[10px] text-muted-foreground mb-1\">{task.time}</div>\n                              <div className=\"font-medium line-clamp-2 leading-relaxed\">{task.title}</div>\n                            </div>\n                            {task.completed && <Check className=\"h-3.5 w-3.5 text-muted-foreground flex-shrink-0\" />}\n                          </div>\n                        </button>\n                      ))\n                    )}\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 468, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/month-view.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Task, TaskCategory } from \"@/types/task\"\nimport { useMemo, useState } from \"react\"\nimport { ChevronLeft, ChevronRight, ListTodo } from \"lucide-react\"\n\ninterface MonthViewProps {\n  tasks: Task[]\n  selectedDate: Date\n  onDateClick: (date: Date) => void\n  onMonthChange?: (date: Date) => void\n  categories?: TaskCategory[]\n}\n\nexport function MonthView({ tasks, selectedDate, onDateClick, onMonthChange, categories = [] }: MonthViewProps) {\n  const [showIncompleteModal, setShowIncompleteModal] = useState(false)\n\n  const { calendarDays, stats, incompleteTasks } = useMemo(() => {\n    const year = selectedDate.getFullYear()\n    const month = selectedDate.getMonth()\n\n    const firstDay = new Date(year, month, 1)\n    const lastDay = new Date(year, month + 1, 0)\n\n    const firstDayOfWeek = firstDay.getDay()\n    const startDate = new Date(firstDay)\n    startDate.setDate(1 - (firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1))\n\n    const days = []\n    const currentDate = new Date(startDate)\n\n    for (let i = 0; i < 42; i++) {\n      days.push(new Date(currentDate))\n      currentDate.setDate(currentDate.getDate() + 1)\n    }\n\n    const monthDates = days.filter((d) => d.getMonth() === month).map((d) => d.toISOString().split(\"T\")[0])\n    const monthTasks = tasks.filter((t) => monthDates.includes(t.date))\n    const total = monthTasks.length\n    const completed = monthTasks.filter((t) => t.completed).length\n    const incomplete = monthTasks.filter((t) => !t.completed)\n\n    return {\n      calendarDays: days,\n      stats: { total, completed },\n      incompleteTasks: incomplete,\n    }\n  }, [selectedDate, tasks])\n\n  const getTaskStatsForDay = (date: Date) => {\n    const dateStr = date.toISOString().split(\"T\")[0]\n    const dayTasks = tasks.filter((t) => t.date === dateStr)\n    const total = dayTasks.length\n    const completed = dayTasks.filter((t) => t.completed).length\n    const completedWithCategories = dayTasks.filter((t) => t.completed && t.categoryId)\n\n    return { total, completed, completionRate: total > 0 ? completed / total : 0, completedWithCategories }\n  }\n\n  const getCompletionColor = (rate: number) => {\n    if (rate >= 1) return \"bg-green-100/80 border-green-200\"\n    if (rate >= 0.75) return \"bg-blue-100/80 border-blue-200\"\n    if (rate >= 0.5) return \"bg-yellow-100/80 border-yellow-200\"\n    if (rate >= 0.25) return \"bg-orange-100/80 border-orange-200\"\n    return \"\"\n  }\n\n  const getCategoryById = (id: string) => categories.find((c) => c.id === id)\n\n  const weekDays = [\"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"]\n\n  const handlePreviousMonth = () => {\n    const newDate = new Date(selectedDate)\n    newDate.setMonth(newDate.getMonth() - 1)\n    onMonthChange?.(newDate)\n  }\n\n  const handleNextMonth = () => {\n    const newDate = new Date(selectedDate)\n    newDate.setMonth(newDate.getMonth() + 1)\n    onMonthChange?.(newDate)\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"text-center mb-6\">\n        <div className=\"flex items-center justify-center gap-4\">\n          <button\n            onClick={handlePreviousMonth}\n            className=\"p-2 hover:bg-muted/50 rounded-full transition-colors active:scale-95\"\n            aria-label=\"Previous month\"\n          >\n            <ChevronLeft className=\"h-6 w-6 text-foreground/70\" />\n          </button>\n\n          <div className=\"inline-block relative\">\n            <div className=\"text-5xl font-bold text-foreground/90 tracking-tight\">\n              {selectedDate.toLocaleDateString(\"en-US\", { month: \"short\" })}.\n            </div>\n            <div className=\"absolute -top-2 -right-12 text-2xl\">✨</div>\n          </div>\n\n          <button\n            onClick={handleNextMonth}\n            className=\"p-2 hover:bg-muted/50 rounded-full transition-colors active:scale-95\"\n            aria-label=\"Next month\"\n          >\n            <ChevronRight className=\"h-6 w-6 text-foreground/70\" />\n          </button>\n        </div>\n\n        <div className=\"text-sm text-muted-foreground font-handwriting mt-2\">{selectedDate.getFullYear()}</div>\n      </div>\n\n      {incompleteTasks.length > 0 && (\n        <button\n          onClick={() => setShowIncompleteModal(true)}\n          className=\"w-full py-3 px-4 bg-amber-50 border-2 border-amber-200 rounded-xl flex items-center justify-between active:scale-[0.98] transition-transform hover:bg-amber-100\"\n        >\n          <div className=\"flex items-center gap-2\">\n            <ListTodo className=\"h-5 w-5 text-amber-600\" />\n            <span className=\"text-sm font-medium text-amber-900\">待完成任务</span>\n          </div>\n          <span className=\"text-lg font-bold text-amber-600\">{incompleteTasks.length}</span>\n        </button>\n      )}\n\n      <div className=\"bg-background rounded-2xl border-2 border-foreground/20 overflow-hidden sketch-border\">\n        <div className=\"grid grid-cols-7 border-b-2 border-foreground/20 bg-muted/20\">\n          {weekDays.map((day) => (\n            <div key={day} className=\"text-center py-3 text-xs font-bold text-foreground/70 uppercase tracking-wider\">\n              {day}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-7\">\n          {calendarDays.map((day, index) => {\n            const isCurrentMonth = day.getMonth() === selectedDate.getMonth()\n            const isToday = day.toDateString() === new Date().toDateString()\n            const { total, completed, completionRate, completedWithCategories } = getTaskStatsForDay(day)\n\n            return (\n              <button\n                key={index}\n                onClick={() => onDateClick(day)}\n                disabled={!isCurrentMonth}\n                className={`relative aspect-square border-r border-b border-foreground/15 p-2 transition-all active:scale-95 disabled:active:scale-100 ${\n                  !isCurrentMonth ? \"text-muted-foreground/30 bg-muted/5\" : \"hover:bg-muted/30\"\n                } ${isToday ? \"bg-yellow-50 border-yellow-300 border-2\" : \"\"} ${\n                  total > 0 && isCurrentMonth ? getCompletionColor(completionRate) : \"\"\n                }`}\n              >\n                <div className=\"flex flex-col items-start justify-start h-full\">\n                  <div className={`text-sm font-bold mb-1 ${isToday ? \"text-foreground\" : \"text-foreground/80\"}`}>\n                    {day.getDate()}\n                  </div>\n\n                  {isCurrentMonth && completedWithCategories.length > 0 && (\n                    <div className=\"flex flex-wrap gap-0.5 mt-1\">\n                      {completedWithCategories.slice(0, 3).map((task, idx) => {\n                        const category = getCategoryById(task.categoryId!)\n                        return (\n                          <div\n                            key={idx}\n                            className=\"w-5 h-5 rounded-full bg-white border border-foreground/20 flex items-center justify-center text-[10px] shadow-sm\"\n                            title={category?.name}\n                          >\n                            {category?.icon || \"✓\"}\n                          </div>\n                        )\n                      })}\n                      {completedWithCategories.length > 3 && (\n                        <div className=\"w-5 h-5 rounded-full bg-white border border-foreground/20 flex items-center justify-center text-[8px] font-bold text-foreground/60\">\n                          +{completedWithCategories.length - 3}\n                        </div>\n                      )}\n                    </div>\n                  )}\n\n                  {total > 0 && isCurrentMonth && completed < total && (\n                    <div className=\"flex items-center gap-1 mt-auto\">\n                      <div className=\"w-4 h-4 rounded-full border-2 border-foreground/40 flex items-center justify-center text-[8px] font-bold\">\n                        {total - completed}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </button>\n            )\n          })}\n        </div>\n      </div>\n\n      <div className=\"text-center text-sm text-muted-foreground font-handwriting\">\n        {stats.total > 0 ? (\n          <p>\n            {stats.completed} of {stats.total} tasks completed this month\n          </p>\n        ) : (\n          <p>No tasks this month, time to plan ahead!</p>\n        )}\n      </div>\n\n      {showIncompleteModal && (\n        <div className=\"fixed inset-0 z-50 bg-black/50 flex items-end\" onClick={() => setShowIncompleteModal(false)}>\n          <div\n            className=\"w-full bg-background rounded-t-3xl max-h-[70vh] overflow-y-auto pb-safe\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"sticky top-0 bg-background border-b border-border px-6 py-4\">\n              <div className=\"w-12 h-1 bg-muted-foreground/30 rounded-full mx-auto mb-4\" />\n              <h3 className=\"text-lg font-bold\">待完成任务 ({incompleteTasks.length})</h3>\n            </div>\n            <div className=\"px-6 py-4 space-y-3\">\n              {incompleteTasks.map((task) => {\n                const category = task.categoryId ? getCategoryById(task.categoryId) : null\n                return (\n                  <div\n                    key={task.id}\n                    className=\"p-4 bg-muted/30 rounded-xl border border-border flex items-center justify-between\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        {category && <span className=\"text-lg\">{category.icon}</span>}\n                        <span className=\"font-medium text-foreground\">{task.title}</span>\n                      </div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        {new Date(task.date).toLocaleDateString(\"zh-CN\")} {task.time}\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 962, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/task-detail-sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Task } from \"@/types/task\"\nimport { Check, X, Download, FileImage } from \"lucide-react\"\nimport { useEffect } from \"react\"\n\ninterface TaskDetailSheetProps {\n  task: Task | null\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onComplete: (taskId: string) => void\n}\n\nexport function TaskDetailSheet({ task, open, onOpenChange, onComplete }: TaskDetailSheetProps) {\n  useEffect(() => {\n    if (open && task) {\n      document.body.style.overflow = \"hidden\"\n    } else {\n      document.body.style.overflow = \"unset\"\n    }\n    return () => {\n      document.body.style.overflow = \"unset\"\n    }\n  }, [open, task])\n\n  useEffect(() => {\n    if (!open || !task) return\n\n    const handleComplete = () => {\n      const event = new CustomEvent(\"show-toast\", {\n        detail: { message: `太棒了！已完成「${task.title}」`, type: \"success\" },\n      })\n      window.dispatchEvent(event)\n    }\n\n    window.addEventListener(\"task-completed\", handleComplete)\n    return () => window.removeEventListener(\"task-completed\", handleComplete)\n  }, [open, task])\n\n  if (!open || !task) return null\n\n  const handleComplete = () => {\n    onComplete(task.id)\n    window.dispatchEvent(new Event(\"task-completed\"))\n  }\n\n  const handleImageDownload = (imageUrl: string, index: number) => {\n    const link = document.createElement(\"a\")\n    link.href = imageUrl\n    link.download = `attachment-${index + 1}.png`\n    link.click()\n  }\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div\n        className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-40 animate-in fade-in duration-200\"\n        onClick={() => onOpenChange(false)}\n      />\n\n      {/* Sheet */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-50 animate-slide-up\">\n        <div className=\"bg-background rounded-t-3xl border-t border-x border-border/40 shadow-2xl max-w-lg mx-auto pb-safe max-h-[85vh] overflow-y-auto\">\n          {/* Handle */}\n          <div className=\"flex justify-center pt-3 pb-2\">\n            <div className=\"w-12 h-1 rounded-full bg-muted-foreground/30\" />\n          </div>\n\n          {/* Content */}\n          <div className=\"px-5 pt-2 pb-5\">\n            <div className=\"flex items-start justify-between mb-6\">\n              <div className=\"flex items-start gap-3 flex-1 pr-4\">\n                {task.categoryIcon && <span className=\"text-2xl\">{task.categoryIcon}</span>}\n                <div>\n                  <h2 className=\"text-lg font-semibold text-foreground leading-relaxed\">{task.title}</h2>\n                  {task.category && <p className=\"text-xs text-muted-foreground mt-1\">{task.category}</p>}\n                </div>\n              </div>\n              <button\n                onClick={() => onOpenChange(false)}\n                className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform flex-shrink-0\"\n              >\n                <X className=\"h-4 w-4\" />\n              </button>\n            </div>\n\n            <div className=\"space-y-4 mb-6\">\n              <div className=\"flex items-center justify-between py-3 border-b border-border/40\">\n                <div className=\"text-sm text-muted-foreground font-medium\">时间</div>\n                <div className=\"text-sm font-semibold\">{task.time}</div>\n              </div>\n\n              {task.repeatConfig?.enabled && (\n                <div className=\"flex items-center justify-between py-3 border-b border-border/40\">\n                  <div className=\"text-sm text-muted-foreground font-medium\">重复</div>\n                  <div className=\"text-sm font-semibold\">\n                    {task.repeatConfig.frequency === \"daily\"\n                      ? \"每天\"\n                      : task.repeatConfig.frequency === \"weekly\"\n                        ? \"每周\"\n                        : \"每月\"}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex items-center justify-between py-3 border-b border-border/40\">\n                <div className=\"text-sm text-muted-foreground font-medium\">状态</div>\n                <div className={`text-sm font-semibold ${task.completed ? \"text-muted-foreground\" : \"\"}`}>\n                  {task.completed ? \"已完成\" : \"待完成\"}\n                </div>\n              </div>\n\n              {task.images && task.images.length > 0 && (\n                <div className=\"pt-3\">\n                  <div className=\"text-sm text-muted-foreground font-medium mb-3\">附件</div>\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {task.images.map((img, idx) => (\n                      <div key={idx} className=\"relative group\">\n                        <div className=\"aspect-square rounded-lg overflow-hidden border border-border/40 bg-muted/20\">\n                          <img\n                            src={img || \"/placeholder.svg\"}\n                            alt={`附件 ${idx + 1}`}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                        <div className=\"absolute inset-0 bg-black/60 opacity-0 group-active:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2\">\n                          <button\n                            onClick={() => handleImageDownload(img, idx)}\n                            className=\"w-8 h-8 rounded-full bg-white/90 flex items-center justify-center active:scale-95 transition-transform\"\n                          >\n                            <Download className=\"h-4 w-4 text-black\" />\n                          </button>\n                        </div>\n                        <div className=\"mt-1 text-xs text-center text-muted-foreground truncate\">\n                          <FileImage className=\"h-3 w-3 inline mr-1\" />\n                          图片 {idx + 1}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Action Button */}\n            {!task.completed && (\n              <button\n                onClick={handleComplete}\n                className=\"w-full flex items-center justify-center gap-2 py-3.5 px-4 bg-foreground text-background rounded-xl font-semibold active:scale-[0.98] transition-transform shadow-sm\"\n              >\n                <Check className=\"h-5 w-5\" />\n                标记完成\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1349, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/add-task-sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useRef } from \"react\"\nimport { X, Mic, ImageIcon, BookTemplate as Template, Plus, Repeat, ChevronRight, ChevronDown } from \"lucide-react\"\nimport type { Task, TaskTemplate, TaskCategory, RepeatConfig } from \"@/types/task\"\n\ninterface AddTaskSheetProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onAdd: (task: Omit<Task, \"id\">) => void\n  selectedDate: Date\n  currentView: \"day\" | \"week\" | \"month\"\n  templates: TaskTemplate[]\n  categories: TaskCategory[]\n  onManageTemplates: () => void\n  onManageCategories: () => void\n}\n\nexport function AddTaskSheet({\n  open,\n  onOpenChange,\n  onAdd,\n  selectedDate,\n  currentView,\n  templates,\n  categories,\n  onManageTemplates,\n  onManageCategories,\n}: AddTaskSheetProps) {\n  const [mode, setMode] = useState<\"single\" | \"template\">(\"single\")\n  const [title, setTitle] = useState(\"\")\n  const [time, setTime] = useState(\"09:00\")\n  const [date, setDate] = useState(selectedDate.toISOString().split(\"T\")[0])\n  const [images, setImages] = useState<string[]>([])\n  const [isRecording, setIsRecording] = useState(false)\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"\")\n  const [showRepeatConfig, setShowRepeatConfig] = useState(false)\n  const [repeatConfig, setRepeatConfig] = useState<RepeatConfig>({\n    enabled: false,\n    frequency: \"daily\",\n    interval: 1,\n  })\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null)\n  const [expandedTemplate, setExpandedTemplate] = useState<string | null>(null)\n  const [templateTime, setTemplateTime] = useState(\"09:00\")\n  const [templateDate, setTemplateDate] = useState(selectedDate.toISOString().split(\"T\")[0])\n  const [editingTasks, setEditingTasks] = useState<\n    { title: string; time: string; category?: string; categoryIcon?: string }[]\n  >([])\n\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const handleVoiceInput = () => {\n    if (!isRecording) {\n      setIsRecording(true)\n      // Simulated voice recognition - in production, use Web Speech API\n      setTimeout(() => {\n        setTitle(\"语音输入的任务示例\")\n        setIsRecording(false)\n      }, 2000)\n    }\n  }\n\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files\n    if (!files) return\n\n    Array.from(files).forEach((file) => {\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        setImages((prev) => [...prev, reader.result as string])\n      }\n      reader.readAsDataURL(file)\n    })\n  }\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!title.trim()) return\n\n    const category = categories.find((c) => c.id === selectedCategory)\n    onAdd({\n      title: title.trim(),\n      time,\n      completed: false,\n      date,\n      images: images.length > 0 ? images : undefined,\n      category: category?.name,\n      categoryIcon: category?.icon,\n      repeatConfig: repeatConfig.enabled ? repeatConfig : undefined,\n    })\n\n    // Reset form\n    setTitle(\"\")\n    setTime(\"09:00\")\n    setImages([])\n    setSelectedCategory(\"\")\n    setRepeatConfig({ enabled: false, frequency: \"daily\", interval: 1 })\n    setDate(selectedDate.toISOString().split(\"T\")[0])\n  }\n\n  const handleTemplateExpand = (template: TaskTemplate) => {\n    if (expandedTemplate === template.id) {\n      setExpandedTemplate(null)\n      setSelectedTemplate(null)\n      setEditingTasks([])\n    } else {\n      setExpandedTemplate(template.id)\n      setSelectedTemplate(template.id)\n      setEditingTasks(\n        template.tasks.map((t) => ({ ...t, category: template.category, categoryIcon: template.categoryIcon })),\n      )\n    }\n  }\n\n  const handleTemplateSubmit = () => {\n    if (!selectedTemplate) return\n\n    editingTasks.forEach((task) => {\n      onAdd({\n        title: task.title,\n        time: currentView === \"day\" ? task.time : templateTime,\n        completed: false,\n        date: currentView === \"day\" ? date : templateDate,\n        images: undefined,\n        category: task.category,\n        categoryIcon: task.categoryIcon,\n      })\n    })\n\n    onOpenChange(false)\n    setExpandedTemplate(null)\n    setSelectedTemplate(null)\n    setEditingTasks([])\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm\" onClick={() => onOpenChange(false)} />\n\n      <div className=\"fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-3xl shadow-2xl animate-slide-up pb-safe max-h-[85vh] overflow-y-auto\">\n        <div className=\"px-5 py-4 border-b border-border/40 sticky top-0 bg-background z-10\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">添加待办</h2>\n            <button\n              onClick={() => onOpenChange(false)}\n              className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n\n          <div className=\"flex gap-2 mt-3\">\n            <button\n              type=\"button\"\n              onClick={() => setMode(\"single\")}\n              className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all active:scale-95 flex items-center justify-center gap-1.5 ${\n                mode === \"single\" ? \"bg-foreground text-background\" : \"bg-muted/40 text-muted-foreground\"\n              }`}\n            >\n              <Plus className=\"h-4 w-4\" />\n              单个任务\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setMode(\"template\")}\n              className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all active:scale-95 flex items-center justify-center gap-1.5 ${\n                mode === \"template\" ? \"bg-foreground text-background\" : \"bg-muted/40 text-muted-foreground\"\n              }`}\n            >\n              <Template className=\"h-4 w-4\" />\n              从模板\n            </button>\n          </div>\n        </div>\n\n        {mode === \"single\" ? (\n          <form onSubmit={handleSubmit} className=\"px-5 py-5 space-y-5\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">任务名称</label>\n              <div className=\"relative\">\n                <input\n                  type=\"text\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  placeholder=\"输入任务名称\"\n                  className=\"w-full px-4 py-3 pr-12 rounded-xl border border-border/40 bg-background text-sm focus:outline-none focus:ring-2 focus:ring-foreground/20\"\n                  autoFocus\n                />\n                <button\n                  type=\"button\"\n                  onClick={handleVoiceInput}\n                  className={`absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 rounded-lg flex items-center justify-center transition-all active:scale-95 ${\n                    isRecording ? \"bg-red-500 text-white\" : \"bg-muted/50\"\n                  }`}\n                >\n                  <Mic className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <label className=\"block text-sm font-medium\">任务分类</label>\n                <button\n                  type=\"button\"\n                  onClick={onManageCategories}\n                  className=\"text-xs text-muted-foreground hover:text-foreground\"\n                >\n                  管理分类\n                </button>\n              </div>\n              <div className=\"flex gap-2 flex-wrap\">\n                {categories.map((category) => (\n                  <button\n                    key={category.id}\n                    type=\"button\"\n                    onClick={() => setSelectedCategory(category.id)}\n                    className={`px-3 py-2 rounded-lg text-sm flex items-center gap-1.5 transition-all active:scale-95 ${\n                      selectedCategory === category.id ? \"bg-foreground text-background\" : \"bg-muted/40 text-foreground\"\n                    }`}\n                  >\n                    <span className=\"text-base\">{category.icon}</span>\n                    <span>{category.name}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {currentView !== \"day\" && (\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">日期</label>\n                <input\n                  type=\"date\"\n                  value={date}\n                  onChange={(e) => setDate(e.target.value)}\n                  className=\"w-full px-4 py-3 rounded-xl border border-border/40 bg-background text-sm focus:outline-none focus:ring-2 focus:ring-foreground/20\"\n                />\n              </div>\n            )}\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">时间</label>\n              <input\n                type=\"time\"\n                value={time}\n                onChange={(e) => setTime(e.target.value)}\n                className=\"w-full px-4 py-3 rounded-xl border border-border/40 bg-background text-sm focus:outline-none focus:ring-2 focus:ring-foreground/20\"\n              />\n            </div>\n\n            <div>\n              <button\n                type=\"button\"\n                onClick={() => setShowRepeatConfig(!showRepeatConfig)}\n                className=\"w-full flex items-center justify-between px-4 py-3 rounded-xl border border-border/40 bg-background text-sm active:scale-[0.98] transition-transform\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Repeat className=\"h-4 w-4\" />\n                  <span>{repeatConfig.enabled ? \"重复已启用\" : \"设置重复\"}</span>\n                </div>\n                <ChevronRight className={`h-4 w-4 transition-transform ${showRepeatConfig ? \"rotate-90\" : \"\"}`} />\n              </button>\n\n              {showRepeatConfig && (\n                <div className=\"mt-3 space-y-3 p-4 rounded-xl bg-muted/20 border border-border/40\">\n                  <label className=\"flex items-center gap-2\">\n                    <input\n                      type=\"checkbox\"\n                      checked={repeatConfig.enabled}\n                      onChange={(e) => setRepeatConfig({ ...repeatConfig, enabled: e.target.checked })}\n                      className=\"w-4 h-4 rounded\"\n                    />\n                    <span className=\"text-sm\">启用重复</span>\n                  </label>\n\n                  {repeatConfig.enabled && (\n                    <>\n                      <div>\n                        <label className=\"block text-xs font-medium mb-1.5\">重复频率</label>\n                        <select\n                          value={repeatConfig.frequency}\n                          onChange={(e) => {\n                            const newFrequency = e.target.value as \"daily\" | \"weekly\" | \"monthly\"\n                            setRepeatConfig({\n                              ...repeatConfig,\n                              frequency: newFrequency,\n                              interval: newFrequency === \"daily\" ? 1 : repeatConfig.interval,\n                              daysOfWeek: newFrequency === \"weekly\" ? [] : undefined,\n                              dayOfMonth: newFrequency === \"monthly\" ? undefined : undefined,\n                            })\n                          }}\n                          className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                        >\n                          <option value=\"daily\">每天</option>\n                          <option value=\"weekly\">每周</option>\n                          <option value=\"monthly\">每月</option>\n                        </select>\n                      </div>\n\n                      {repeatConfig.frequency !== \"daily\" && (\n                        <div>\n                          <label className=\"block text-xs font-medium mb-1.5\">\n                            间隔（每 {repeatConfig.frequency === \"weekly\" ? \"几周\" : \"几月\"}）\n                          </label>\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            value={repeatConfig.interval}\n                            onChange={(e) => setRepeatConfig({ ...repeatConfig, interval: Number(e.target.value) })}\n                            className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                          />\n                        </div>\n                      )}\n\n                      {repeatConfig.frequency === \"weekly\" && (\n                        <div>\n                          <label className=\"block text-xs font-medium mb-1.5\">选择重复日期</label>\n                          <div className=\"grid grid-cols-7 gap-1\">\n                            {[\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"].map((day, idx) => {\n                              const isSelected = repeatConfig.daysOfWeek?.includes(idx) || false\n                              return (\n                                <button\n                                  key={idx}\n                                  type=\"button\"\n                                  onClick={() => {\n                                    const current = repeatConfig.daysOfWeek || []\n                                    const newDays = isSelected\n                                      ? current.filter((d) => d !== idx)\n                                      : [...current, idx].sort()\n                                    setRepeatConfig({ ...repeatConfig, daysOfWeek: newDays })\n                                  }}\n                                  className={`py-2 rounded-lg text-xs font-medium transition-all active:scale-95 ${\n                                    isSelected ? \"bg-foreground text-background\" : \"bg-muted/40 text-muted-foreground\"\n                                  }`}\n                                >\n                                  {day}\n                                </button>\n                              )\n                            })}\n                          </div>\n                        </div>\n                      )}\n\n                      {repeatConfig.frequency === \"monthly\" && (\n                        <div>\n                          <label className=\"block text-xs font-medium mb-1.5\">选择每月的哪一天</label>\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max=\"31\"\n                            value={repeatConfig.dayOfMonth || \"\"}\n                            onChange={(e) =>\n                              setRepeatConfig({\n                                ...repeatConfig,\n                                dayOfMonth: e.target.value ? Number(e.target.value) : undefined,\n                              })\n                            }\n                            placeholder=\"例如: 15 (每月15号)\"\n                            className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                          />\n                        </div>\n                      )}\n\n                      <div>\n                        <label className=\"block text-xs font-medium mb-1.5\">重复次数（可选）</label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          value={repeatConfig.count || \"\"}\n                          onChange={(e) =>\n                            setRepeatConfig({\n                              ...repeatConfig,\n                              count: e.target.value ? Number(e.target.value) : undefined,\n                            })\n                          }\n                          placeholder=\"不限制\"\n                          className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-xs font-medium mb-1.5\">结束日期（可选）</label>\n                        <input\n                          type=\"date\"\n                          value={repeatConfig.endDate || \"\"}\n                          onChange={(e) => setRepeatConfig({ ...repeatConfig, endDate: e.target.value })}\n                          className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                        />\n                      </div>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">图片附件</label>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                multiple\n                onChange={handleImageUpload}\n                className=\"hidden\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => fileInputRef.current?.click()}\n                className=\"w-full py-3 rounded-xl border border-dashed border-border/40 bg-muted/20 text-sm text-muted-foreground flex items-center justify-center gap-2 active:scale-[0.98] transition-transform\"\n              >\n                <ImageIcon className=\"h-4 w-4\" />\n                添加图片\n              </button>\n              {images.length > 0 && (\n                <div className=\"flex gap-2 mt-3 flex-wrap\">\n                  {images.map((img, idx) => (\n                    <div key={idx} className=\"relative w-20 h-20 rounded-lg overflow-hidden border border-border/40\">\n                      <img src={img || \"/placeholder.svg\"} alt=\"\" className=\"w-full h-full object-cover\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => setImages((prev) => prev.filter((_, i) => i !== idx))}\n                        className=\"absolute top-1 right-1 w-5 h-5 rounded-full bg-black/60 text-white flex items-center justify-center\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={!title.trim()}\n              className=\"w-full py-3.5 rounded-xl bg-foreground text-background font-medium active:scale-[0.98] transition-transform disabled:opacity-40 disabled:active:scale-100\"\n            >\n              添加\n            </button>\n          </form>\n        ) : (\n          <div className=\"px-5 py-5 space-y-4\">\n            <div className=\"space-y-3\">\n              {templates.map((template) => (\n                <div key={template.id} className=\"rounded-xl border border-border/40 bg-muted/20 overflow-hidden\">\n                  <button\n                    onClick={() => handleTemplateExpand(template)}\n                    className=\"w-full p-4 flex items-center gap-3 active:bg-muted/30 transition-all text-left\"\n                  >\n                    {expandedTemplate === template.id ? (\n                      <ChevronDown className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                    ) : (\n                      <ChevronRight className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n                    )}\n                    <div className=\"text-2xl\">{template.icon}</div>\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium text-sm\">{template.name}</div>\n                      <div className=\"text-xs text-muted-foreground mt-0.5\">{template.tasks.length} 项任务</div>\n                    </div>\n                  </button>\n\n                  {expandedTemplate === template.id && (\n                    <div className=\"px-4 pb-4 space-y-3\">\n                      <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                        {editingTasks.map((task, idx) => (\n                          <div key={idx} className=\"flex items-start gap-2 text-sm bg-background/50 rounded-lg p-2.5\">\n                            <div className=\"w-5 h-5 rounded-full bg-muted/50 flex items-center justify-center text-xs text-muted-foreground flex-shrink-0 mt-0.5\">\n                              {idx + 1}\n                            </div>\n                            <div className=\"flex-1\">\n                              <input\n                                type=\"text\"\n                                value={task.title}\n                                onChange={(e) => {\n                                  const newTasks = [...editingTasks]\n                                  newTasks[idx].title = e.target.value\n                                  setEditingTasks(newTasks)\n                                }}\n                                className=\"w-full bg-transparent border-none outline-none font-medium text-sm\"\n                              />\n                              {task.category && (\n                                <div className=\"text-xs text-muted-foreground mt-1 flex items-center gap-1\">\n                                  {task.categoryIcon && <span>{task.categoryIcon}</span>}\n                                  <span>{task.category}</span>\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n\n                      <div className=\"pt-3 border-t border-border/30 space-y-3\">\n                        <div className=\"text-xs font-medium text-muted-foreground\">为所有任务设置时间</div>\n\n                        {currentView !== \"day\" && (\n                          <div>\n                            <label className=\"block text-xs font-medium mb-1.5\">日期</label>\n                            <input\n                              type=\"date\"\n                              value={templateDate}\n                              onChange={(e) => setTemplateDate(e.target.value)}\n                              className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                            />\n                          </div>\n                        )}\n\n                        <div>\n                          <label className=\"block text-xs font-medium mb-1.5\">时间</label>\n                          <input\n                            type=\"time\"\n                            value={templateTime}\n                            onChange={(e) => setTemplateTime(e.target.value)}\n                            className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                          />\n                        </div>\n\n                        <button\n                          onClick={handleTemplateSubmit}\n                          className=\"w-full py-2.5 rounded-lg bg-foreground text-background text-sm font-medium active:scale-95 transition-transform\"\n                        >\n                          添加 {editingTasks.length} 个任务\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n\n            <button\n              onClick={onManageTemplates}\n              className=\"w-full py-3 rounded-xl border border-dashed border-border/40 bg-muted/20 text-sm font-medium text-muted-foreground active:scale-[0.98] transition-transform\"\n            >\n              管理模板\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2462, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/template-manager.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { X, Plus, Edit2, Trash2, ChevronDown, ChevronRight } from \"lucide-react\"\nimport type { TaskTemplate, TaskCategory } from \"@/types/task\"\n\ninterface TemplateManagerProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  templates: TaskTemplate[]\n  categories: TaskCategory[]\n  onSave: (templates: TaskTemplate[]) => void\n}\n\nexport function TemplateManager({ open, onOpenChange, templates, categories, onSave }: TemplateManagerProps) {\n  const [localTemplates, setLocalTemplates] = useState<TaskTemplate[]>(templates)\n  const [editing, setEditing] = useState<string | null>(null)\n  const [editName, setEditName] = useState(\"\")\n  const [editIcon, setEditIcon] = useState(\"\")\n  const [expandedTemplate, setExpandedTemplate] = useState<string | null>(null)\n  const [editingTasks, setEditingTasks] = useState<\n    Array<{ title: string; time: string; category?: string; categoryIcon?: string }>\n  >([])\n  const [editingTemplateId, setEditingTemplateId] = useState<string | null>(null)\n\n  const handleAddTemplate = () => {\n    const newTemplate: TaskTemplate = {\n      id: Date.now().toString(),\n      name: \"新模板\",\n      icon: \"📝\",\n      tasks: [],\n    }\n    setLocalTemplates([...localTemplates, newTemplate])\n    setEditing(newTemplate.id)\n    setEditName(newTemplate.name)\n    setEditIcon(newTemplate.icon)\n  }\n\n  const handleSaveEdit = (id: string) => {\n    setLocalTemplates((prev) => prev.map((t) => (t.id === id ? { ...t, name: editName, icon: editIcon } : t)))\n    setEditing(null)\n  }\n\n  const handleDeleteTemplate = (id: string) => {\n    setLocalTemplates((prev) => prev.filter((t) => t.id !== id))\n  }\n\n  const handleEditTasks = (template: TaskTemplate) => {\n    setEditingTemplateId(template.id)\n    setEditingTasks([...template.tasks])\n  }\n\n  const handleSaveEditedTasks = () => {\n    if (!editingTemplateId) return\n    setLocalTemplates((prev) => prev.map((t) => (t.id === editingTemplateId ? { ...t, tasks: editingTasks } : t)))\n    setEditingTemplateId(null)\n    setEditingTasks([])\n  }\n\n  const handleAddTaskToTemplate = () => {\n    setEditingTasks([...editingTasks, { title: \"新任务\", time: \"09:00\" }])\n  }\n\n  const handleDeleteTaskFromTemplate = (index: number) => {\n    setEditingTasks((prev) => prev.filter((_, i) => i !== index))\n  }\n\n  const handleUpdateTask = (index: number, field: \"title\" | \"time\" | \"category\", value: string) => {\n    setEditingTasks((prev) => {\n      const newTasks = [...prev]\n      if (field === \"category\") {\n        const category = categories.find((c) => c.id === value)\n        newTasks[index] = { ...newTasks[index], category: category?.name, categoryIcon: category?.icon }\n      } else {\n        newTasks[index] = { ...newTasks[index], [field]: value }\n      }\n      return newTasks\n    })\n  }\n\n  const handleSave = () => {\n    onSave(localTemplates)\n    onOpenChange(false)\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm\" onClick={() => onOpenChange(false)} />\n\n      <div className=\"fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-3xl shadow-2xl animate-slide-up pb-safe max-h-[85vh] overflow-y-auto\">\n        <div className=\"px-5 py-4 border-b border-border/40 sticky top-0 bg-background z-10\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">管理模板</h2>\n            <button\n              onClick={() => onOpenChange(false)}\n              className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-5 py-5 space-y-3\">\n          {localTemplates.map((template) => (\n            <div key={template.id} className=\"rounded-xl border border-border/40 bg-muted/20 overflow-hidden\">\n              <div className=\"p-4\">\n                {editing === template.id ? (\n                  <div className=\"space-y-3\">\n                    <input\n                      type=\"text\"\n                      value={editIcon}\n                      onChange={(e) => setEditIcon(e.target.value)}\n                      placeholder=\"图标 (emoji)\"\n                      className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                    />\n                    <input\n                      type=\"text\"\n                      value={editName}\n                      onChange={(e) => setEditName(e.target.value)}\n                      placeholder=\"模板名称\"\n                      className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm\"\n                    />\n                    <button\n                      onClick={() => handleSaveEdit(template.id)}\n                      className=\"w-full py-2 rounded-lg bg-foreground text-background text-sm font-medium\"\n                    >\n                      保存\n                    </button>\n                  </div>\n                ) : editingTemplateId === template.id ? (\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <div className=\"text-2xl\">{template.icon}</div>\n                      <div className=\"flex-1 font-medium\">{template.name}</div>\n                      <button\n                        onClick={handleSaveEditedTasks}\n                        className=\"px-3 py-1.5 rounded-lg bg-foreground text-background text-xs font-medium\"\n                      >\n                        保存修改\n                      </button>\n                    </div>\n\n                    <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                      {editingTasks.map((task, idx) => (\n                        <div key={idx} className=\"p-3 rounded-lg bg-background/50 border border-border/30 space-y-2\">\n                          <div className=\"flex items-start gap-2\">\n                            <div className=\"flex-1 space-y-2\">\n                              <input\n                                type=\"text\"\n                                value={task.title}\n                                onChange={(e) => handleUpdateTask(idx, \"title\", e.target.value)}\n                                placeholder=\"任务名称\"\n                                className=\"w-full px-2 py-1.5 rounded border border-border/40 bg-background text-sm\"\n                              />\n                              <input\n                                type=\"time\"\n                                value={task.time}\n                                onChange={(e) => handleUpdateTask(idx, \"time\", e.target.value)}\n                                className=\"w-full px-2 py-1.5 rounded border border-border/40 bg-background text-sm\"\n                              />\n                              <select\n                                value={categories.find((c) => c.name === task.category)?.id || \"\"}\n                                onChange={(e) => handleUpdateTask(idx, \"category\", e.target.value)}\n                                className=\"w-full px-2 py-1.5 rounded border border-border/40 bg-background text-sm\"\n                              >\n                                <option value=\"\">无分类</option>\n                                {categories.map((cat) => (\n                                  <option key={cat.id} value={cat.id}>\n                                    {cat.icon} {cat.name}\n                                  </option>\n                                ))}\n                              </select>\n                            </div>\n                            <button\n                              onClick={() => handleDeleteTaskFromTemplate(idx)}\n                              className=\"w-7 h-7 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center active:scale-95 transition-transform\"\n                            >\n                              <Trash2 className=\"h-3.5 w-3.5\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n\n                    <button\n                      onClick={handleAddTaskToTemplate}\n                      className=\"w-full py-2.5 rounded-lg border border-dashed border-border/40 bg-muted/20 text-sm text-muted-foreground active:scale-95 transition-transform flex items-center justify-center gap-2\"\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                      添加任务项\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"flex items-start gap-3\">\n                      <button\n                        onClick={() => setExpandedTemplate(expandedTemplate === template.id ? null : template.id)}\n                        className=\"mt-1 active:scale-95 transition-transform\"\n                      >\n                        {expandedTemplate === template.id ? (\n                          <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n                        ) : (\n                          <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n                        )}\n                      </button>\n                      <div className=\"text-2xl\">{template.icon}</div>\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium\">{template.name}</div>\n                        <div className=\"text-xs text-muted-foreground mt-1\">{template.tasks.length} 项任务</div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => handleEditTasks(template)}\n                          className=\"w-8 h-8 rounded-lg bg-blue-500/10 text-blue-500 flex items-center justify-center active:scale-95 transition-transform\"\n                          title=\"编辑任务\"\n                        >\n                          <Edit2 className=\"h-4 w-4\" />\n                        </button>\n                        <button\n                          onClick={() => {\n                            setEditing(template.id)\n                            setEditName(template.name)\n                            setEditIcon(template.icon)\n                          }}\n                          className=\"w-8 h-8 rounded-lg bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n                          title=\"编辑名称\"\n                        >\n                          <Edit2 className=\"h-4 w-4\" />\n                        </button>\n                        <button\n                          onClick={() => handleDeleteTemplate(template.id)}\n                          className=\"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center active:scale-95 transition-transform\"\n                          title=\"删除模板\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </button>\n                      </div>\n                    </div>\n\n                    {expandedTemplate === template.id && template.tasks.length > 0 && (\n                      <div className=\"mt-4 pt-4 border-t border-border/30 space-y-2\">\n                        {template.tasks.map((task, idx) => (\n                          <div key={idx} className=\"flex items-start gap-2 text-sm bg-background/50 rounded-lg p-2.5\">\n                            <div className=\"w-5 h-5 rounded-full bg-muted/50 flex items-center justify-center text-xs text-muted-foreground flex-shrink-0 mt-0.5\">\n                              {idx + 1}\n                            </div>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-1.5\">\n                                {task.categoryIcon && <span className=\"text-sm\">{task.categoryIcon}</span>}\n                                <span className=\"font-medium\">{task.title}</span>\n                              </div>\n                              <div className=\"text-xs text-muted-foreground mt-0.5 flex items-center gap-2\">\n                                <span>{task.time}</span>\n                                {task.category && <span>· {task.category}</span>}\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          ))}\n\n          <button\n            onClick={handleAddTemplate}\n            className=\"w-full py-3 rounded-xl border border-dashed border-border/40 bg-muted/20 text-sm font-medium text-muted-foreground active:scale-[0.98] transition-transform flex items-center justify-center gap-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            添加新模板\n          </button>\n        </div>\n\n        <div className=\"px-5 pb-5\">\n          <button\n            onClick={handleSave}\n            className=\"w-full py-3.5 rounded-xl bg-foreground text-background font-medium active:scale-[0.98] transition-transform\"\n          >\n            完成\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/category-manager.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { X, Plus, Trash2 } from \"lucide-react\"\nimport type { TaskCategory } from \"@/types/task\"\n\ninterface CategoryManagerProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  categories: TaskCategory[]\n  onSave: (categories: TaskCategory[]) => void\n}\n\n// 常用图标列表\nconst COMMON_ICONS = [\n  \"💪\",\n  \"⭐\",\n  \"▶️\",\n  \"✅\",\n  \"🎯\",\n  \"📚\",\n  \"🏃\",\n  \"🍎\",\n  \"💼\",\n  \"🎨\",\n  \"🎵\",\n  \"📱\",\n  \"✈️\",\n  \"🏠\",\n  \"🛒\",\n  \"💰\",\n  \"🎓\",\n  \"🧘\",\n  \"🏋️\",\n  \"🚴\",\n  \"📝\",\n  \"💡\",\n  \"🎬\",\n  \"🎮\",\n]\n\nexport function CategoryManager({ open, onOpenChange, categories, onSave }: CategoryManagerProps) {\n  const [localCategories, setLocalCategories] = useState<TaskCategory[]>(categories)\n  const [newCategoryName, setNewCategoryName] = useState(\"\")\n  const [selectedIcon, setSelectedIcon] = useState(\"⭐\")\n\n  const handleAddCategory = () => {\n    if (!newCategoryName.trim()) return\n\n    const newCategory: TaskCategory = {\n      id: Date.now().toString(),\n      name: newCategoryName.trim(),\n      icon: selectedIcon,\n    }\n\n    setLocalCategories([...localCategories, newCategory])\n    setNewCategoryName(\"\")\n    setSelectedIcon(\"⭐\")\n  }\n\n  const handleDeleteCategory = (id: string) => {\n    setLocalCategories(localCategories.filter((c) => c.id !== id))\n  }\n\n  const handleSave = () => {\n    onSave(localCategories)\n    onOpenChange(false)\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm\" onClick={() => onOpenChange(false)} />\n\n      <div className=\"fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-3xl shadow-2xl animate-slide-up pb-safe max-h-[85vh] overflow-y-auto\">\n        <div className=\"px-5 py-4 border-b border-border/40 sticky top-0 bg-background z-10\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">管理分类</h2>\n            <button\n              onClick={() => onOpenChange(false)}\n              className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-5 py-5 space-y-5\">\n          {/* 添加新分类 */}\n          <div className=\"space-y-3 p-4 rounded-xl bg-muted/20 border border-border/40\">\n            <h3 className=\"text-sm font-medium\">添加新分类</h3>\n\n            <div>\n              <label className=\"block text-xs font-medium mb-2\">选择图标</label>\n              <div className=\"flex flex-wrap gap-2\">\n                {COMMON_ICONS.map((icon) => (\n                  <button\n                    key={icon}\n                    type=\"button\"\n                    onClick={() => setSelectedIcon(icon)}\n                    className={`w-10 h-10 rounded-lg flex items-center justify-center text-xl transition-all active:scale-95 ${\n                      selectedIcon === icon\n                        ? \"bg-foreground text-background ring-2 ring-foreground ring-offset-2\"\n                        : \"bg-background border border-border/40\"\n                    }`}\n                  >\n                    {icon}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-xs font-medium mb-2\">分类名称</label>\n              <input\n                type=\"text\"\n                value={newCategoryName}\n                onChange={(e) => setNewCategoryName(e.target.value)}\n                placeholder=\"例如：运动、学习、工作\"\n                className=\"w-full px-3 py-2 rounded-lg border border-border/40 bg-background text-sm focus:outline-none focus:ring-2 focus:ring-foreground/20\"\n              />\n            </div>\n\n            <button\n              onClick={handleAddCategory}\n              disabled={!newCategoryName.trim()}\n              className=\"w-full py-2 rounded-lg bg-foreground text-background text-sm font-medium active:scale-[0.98] transition-transform disabled:opacity-40 flex items-center justify-center gap-2\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              添加分类\n            </button>\n          </div>\n\n          {/* 现有分类列表 */}\n          <div>\n            <h3 className=\"text-sm font-medium mb-3\">已有分类</h3>\n            <div className=\"space-y-2\">\n              {localCategories.map((category) => (\n                <div\n                  key={category.id}\n                  className=\"flex items-center justify-between p-3 rounded-xl bg-muted/20 border border-border/40\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <span className=\"text-2xl\">{category.icon}</span>\n                    <span className=\"text-sm font-medium\">{category.name}</span>\n                  </div>\n                  <button\n                    onClick={() => handleDeleteCategory(category.id)}\n                    className=\"w-8 h-8 rounded-lg bg-red-500/10 text-red-500 flex items-center justify-center active:scale-95 transition-transform\"\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              ))}\n              {localCategories.length === 0 && (\n                <p className=\"text-sm text-muted-foreground text-center py-4\">暂无分类，添加一个试试吧</p>\n              )}\n            </div>\n          </div>\n\n          <button\n            onClick={handleSave}\n            className=\"w-full py-3.5 rounded-xl bg-foreground text-background font-medium active:scale-[0.98] transition-transform\"\n          >\n            保存\n          </button>\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3445, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/statistics-view.tsx"],"sourcesContent":["\"use client\"\n\nimport { useMemo } from \"react\"\nimport { X, TrendingUp, Award, Target } from \"lucide-react\"\nimport type { Task, TaskCategory } from \"@/types/task\"\n\ninterface StatisticsViewProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  tasks: Task[]\n  categories: TaskCategory[]\n}\n\nexport function StatisticsView({ open, onOpenChange, tasks, categories }: StatisticsViewProps) {\n  // 计算统计数据\n  const stats = useMemo(() => {\n    const now = new Date()\n    const currentMonth = now.getMonth()\n    const currentYear = now.getFullYear()\n\n    // 筛选本月任务\n    const monthTasks = tasks.filter((task) => {\n      const taskDate = new Date(task.date)\n      return taskDate.getMonth() === currentMonth && taskDate.getFullYear() === currentYear\n    })\n\n    // 按分类统计\n    const categoryStats = categories\n      .map((category) => {\n        const categoryTasks = monthTasks.filter((task) => task.category === category.name)\n        const completed = categoryTasks.filter((task) => task.completed).length\n        const total = categoryTasks.length\n        const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0\n\n        return {\n          ...category,\n          completed,\n          total,\n          completionRate,\n        }\n      })\n      .filter((stat) => stat.total > 0) // 只显示有任务的分类\n\n    // 总体统计\n    const totalCompleted = monthTasks.filter((task) => task.completed).length\n    const totalTasks = monthTasks.length\n    const overallRate = totalTasks > 0 ? Math.round((totalCompleted / totalTasks) * 100) : 0\n\n    return {\n      categoryStats,\n      totalCompleted,\n      totalTasks,\n      overallRate,\n    }\n  }, [tasks, categories])\n\n  if (!open) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm\" onClick={() => onOpenChange(false)} />\n\n      <div className=\"fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-3xl shadow-2xl animate-slide-up pb-safe max-h-[85vh] overflow-y-auto\">\n        <div className=\"px-5 py-4 border-b border-border/40 sticky top-0 bg-background z-10\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">本月统计</h2>\n            <button\n              onClick={() => onOpenChange(false)}\n              className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-5 py-5 space-y-5\">\n          {/* 总体统计卡片 */}\n          <div className=\"p-5 rounded-2xl bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <Award className=\"h-5 w-5 text-purple-500\" />\n              <h3 className=\"text-base font-semibold\">总体完成情况</h3>\n            </div>\n            <div className=\"flex items-end gap-2 mb-2\">\n              <span className=\"text-4xl font-bold\">{stats.overallRate}%</span>\n              <span className=\"text-muted-foreground mb-1\">完成率</span>\n            </div>\n            <p className=\"text-sm text-muted-foreground\">\n              已完成 {stats.totalCompleted} / {stats.totalTasks} 项任务\n            </p>\n          </div>\n\n          {/* 分类统计 */}\n          <div>\n            <div className=\"flex items-center gap-2 mb-3\">\n              <Target className=\"h-4 w-4\" />\n              <h3 className=\"text-sm font-semibold\">分类统计</h3>\n            </div>\n\n            {stats.categoryStats.length > 0 ? (\n              <div className=\"space-y-3\">\n                {stats.categoryStats.map((stat) => (\n                  <div key={stat.id} className=\"p-4 rounded-xl bg-muted/20 border border-border/40\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-2xl\">{stat.icon}</span>\n                        <span className=\"font-medium\">{stat.name}</span>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-lg font-bold\">{stat.completionRate}%</div>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {stat.completed}/{stat.total}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* 进度条 */}\n                    <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500\"\n                        style={{ width: `${stat.completionRate}%` }}\n                      />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <TrendingUp className=\"h-12 w-12 mx-auto mb-3 opacity-40\" />\n                <p className=\"text-sm\">本月还没有完成的任务</p>\n                <p className=\"text-xs mt-1\">开始添加并完成任务来查看统计吧</p>\n              </div>\n            )}\n          </div>\n\n          {/* 成就提示 */}\n          {stats.overallRate >= 80 && (\n            <div className=\"p-4 rounded-xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 border border-amber-500/20\">\n              <div className=\"flex items-center gap-2 text-amber-600 dark:text-amber-400\">\n                <Award className=\"h-5 w-5\" />\n                <div>\n                  <div className=\"font-semibold\">太棒了！</div>\n                  <div className=\"text-xs\">本月完成率超过80%，继续保持！</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3880, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/ai-chat.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { X, Send, Sparkles } from \"lucide-react\"\n\ninterface Message {\n  id: string\n  role: \"user\" | \"assistant\"\n  content: string\n}\n\ninterface AIChatProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function AIChat({ open, onOpenChange }: AIChatProps) {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: \"1\",\n      role: \"assistant\",\n      content: \"你好！我是你的 AI 助手，可以帮你管理待办事项、提供建议和回答问题。有什么可以帮你的吗？\",\n    },\n  ])\n  const [input, setInput] = useState(\"\")\n  const [isTyping, setIsTyping] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!input.trim()) return\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: input,\n    }\n\n    setMessages((prev) => [...prev, userMessage])\n    setInput(\"\")\n    setIsTyping(true)\n\n    // Simulate AI response\n    setTimeout(() => {\n      const aiMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        role: \"assistant\",\n        content: \"这是一个模拟的 AI 回复。在实际应用中，这里会调用真实的 AI API 来生成回复。\",\n      }\n      setMessages((prev) => [...prev, aiMessage])\n      setIsTyping(false)\n    }, 1500)\n  }\n\n  if (!open) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm\" onClick={() => onOpenChange(false)} />\n\n      <div className=\"fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-3xl shadow-2xl animate-slide-up pb-safe h-[85vh] flex flex-col\">\n        <div className=\"px-5 py-4 border-b border-border/40 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\n              <Sparkles className=\"h-4 w-4 text-white\" />\n            </div>\n            <div>\n              <h2 className=\"text-lg font-semibold\">AI 助手</h2>\n              <p className=\"text-xs text-muted-foreground\">随时为你解答</p>\n            </div>\n          </div>\n          <button\n            onClick={() => onOpenChange(false)}\n            className=\"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center active:scale-95 transition-transform\"\n          >\n            <X className=\"h-4 w-4\" />\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto px-5 py-4 space-y-4\">\n          {messages.map((message) => (\n            <div key={message.id} className={`flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}>\n              <div\n                className={`max-w-[80%] px-4 py-3 rounded-2xl ${\n                  message.role === \"user\" ? \"bg-foreground text-background\" : \"bg-muted/40 text-foreground\"\n                }`}\n              >\n                <p className=\"text-sm leading-relaxed\">{message.content}</p>\n              </div>\n            </div>\n          ))}\n          {isTyping && (\n            <div className=\"flex justify-start\">\n              <div className=\"bg-muted/40 px-4 py-3 rounded-2xl\">\n                <div className=\"flex gap-1\">\n                  <span\n                    className=\"w-2 h-2 rounded-full bg-muted-foreground/50 animate-bounce\"\n                    style={{ animationDelay: \"0ms\" }}\n                  />\n                  <span\n                    className=\"w-2 h-2 rounded-full bg-muted-foreground/50 animate-bounce\"\n                    style={{ animationDelay: \"150ms\" }}\n                  />\n                  <span\n                    className=\"w-2 h-2 rounded-full bg-muted-foreground/50 animate-bounce\"\n                    style={{ animationDelay: \"300ms\" }}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"px-5 py-4 border-t border-border/40\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"输入你的问题...\"\n              className=\"flex-1 px-4 py-3 rounded-xl border border-border/40 bg-background text-sm focus:outline-none focus:ring-2 focus:ring-foreground/20\"\n            />\n            <button\n              type=\"submit\"\n              disabled={!input.trim()}\n              className=\"w-12 h-12 rounded-xl bg-foreground text-background flex items-center justify-center active:scale-95 transition-transform disabled:opacity-40 disabled:active:scale-100\"\n            >\n              <Send className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4186, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,qSAAO,EAAC,IAAA,+PAAI,EAAC;AACtB"}},
    {"offset": {"line": 4204, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/ui/avatar.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AvatarPrimitive from '@radix-ui/react-avatar'\n\nimport { cn } from '@/lib/utils'\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        'relative flex size-8 shrink-0 overflow-hidden rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn('aspect-square size-full', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        'bg-muted flex size-full items-center justify-center rounded-full',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,2XAAC,+bAAoB;QACnB,aAAU;QACV,WAAW,IAAA,mLAAE,EACX,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,2XAAC,gcAAqB;QACpB,aAAU;QACV,WAAW,IAAA,mLAAE,EAAC,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,2XAAC,mcAAwB;QACvB,aAAU;QACV,WAAW,IAAA,mLAAE,EACX,oEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 4267, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/components/ui/dropdown-menu.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4576, "column": 0}, "map": {"version":3,"sources":["file:///Users/jeyyu/Desktop/web/calendar-design-and-interaction/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { DayView } from \"@/components/day-view\"\nimport { WeekView } from \"@/components/week-view\"\nimport { MonthView } from \"@/components/month-view\"\nimport { TaskDetailSheet } from \"@/components/task-detail-sheet\"\nimport { AddTaskSheet } from \"@/components/add-task-sheet\"\nimport { TemplateManager } from \"@/components/template-manager\"\nimport { CategoryManager } from \"@/components/category-manager\"\nimport { StatisticsView } from \"@/components/statistics-view\"\nimport { AIChat } from \"@/components/ai-chat\"\nimport { useAuth } from \"@/lib/auth-context\"\nimport { Calendar, CalendarDays, CalendarRange, Plus, Sparkles, BarChart3, User, LogOut } from \"lucide-react\"\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport type { Task, TaskTemplate, TaskCategory } from \"@/types/task\"\n\nconst initialTemplates: TaskTemplate[] = [\n  {\n    id: \"1\",\n    name: \"出门打包\",\n    icon: \"🎒\",\n    tasks: [\n      { title: \"身份证\", time: \"08:00\" },\n      { title: \"背包\", time: \"08:00\" },\n      { title: \"衣服\", time: \"08:00\" },\n      { title: \"牙刷\", time: \"08:00\" },\n      { title: \"牙膏\", time: \"08:00\" },\n      { title: \"充电器\", time: \"08:00\" },\n    ],\n  },\n  {\n    id: \"2\",\n    name: \"晨间例行\",\n    icon: \"☀️\",\n    tasks: [\n      { title: \"起床\", time: \"07:00\" },\n      { title: \"洗漱\", time: \"07:15\" },\n      { title: \"吃早餐\", time: \"07:30\" },\n      { title: \"锻炼\", time: \"08:00\" },\n    ],\n  },\n  {\n    id: \"3\",\n    name: \"工作日程\",\n    icon: \"💼\",\n    tasks: [\n      { title: \"查看邮件\", time: \"09:00\" },\n      { title: \"团队会议\", time: \"10:00\" },\n      { title: \"午休\", time: \"12:00\" },\n      { title: \"项目工作\", time: \"14:00\" },\n    ],\n  },\n]\n\nconst initialTasks: Task[] = [\n  {\n    id: \"1\",\n    title: \"提交项目周报\",\n    time: \"09:00\",\n    completed: false,\n    date: new Date().toISOString().split(\"T\")[0],\n  },\n  {\n    id: \"2\",\n    title: \"和客户电话会议\",\n    time: \"11:30\",\n    completed: false,\n    date: new Date().toISOString().split(\"T\")[0],\n  },\n  {\n    id: \"3\",\n    title: \"整理会议纪要\",\n    time: \"14:00\",\n    completed: true,\n    date: new Date().toISOString().split(\"T\")[0],\n  },\n]\n\nconst initialCategories: TaskCategory[] = [\n  { id: \"1\", name: \"运动\", icon: \"💪\" },\n  { id: \"2\", name: \"学习\", icon: \"⭐\" },\n  { id: \"3\", name: \"饮食\", icon: \"▶️\" },\n]\n\ntype ViewType = \"day\" | \"week\" | \"month\"\n\nexport default function CalendarPage() {\n  const router = useRouter()\n  const { user, logout, isAuthenticated } = useAuth()\n  const [view, setView] = useState<ViewType>(\"day\")\n  const [tasks, setTasks] = useState<Task[]>(initialTasks)\n  const [templates, setTemplates] = useState<TaskTemplate[]>(initialTemplates)\n  const [categories, setCategories] = useState<TaskCategory[]>(initialCategories)\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null)\n  const [sheetOpen, setSheetOpen] = useState(false)\n  const [addSheetOpen, setAddSheetOpen] = useState(false)\n  const [templateManagerOpen, setTemplateManagerOpen] = useState(false)\n  const [categoryManagerOpen, setCategoryManagerOpen] = useState(false)\n  const [statisticsOpen, setStatisticsOpen] = useState(false)\n  const [aiChatOpen, setAIChatOpen] = useState(false)\n  const [selectedDate, setSelectedDate] = useState(new Date())\n  const [consecutiveCount, setConsecutiveCount] = useState(0)\n\n  const handleLogout = async () => {\n    await logout()\n  }\n\n  const handleTaskClick = (task: Task) => {\n    setSelectedTask(task)\n    setSheetOpen(true)\n  }\n\n  const handleTaskComplete = (taskId: string) => {\n    setTasks((prev) => {\n      const updated = prev.map((t) => (t.id === taskId ? { ...t, completed: !t.completed } : t))\n\n      const newlyCompleted = updated.find((t) => t.id === taskId)\n      if (newlyCompleted?.completed) {\n        const newCount = consecutiveCount + 1\n        setConsecutiveCount(newCount)\n\n        if (newCount === 3) {\n          setTimeout(() => {\n            const event = new CustomEvent(\"show-toast\", {\n              detail: { message: \"三连完成！效率满分！\", type: \"achievement\" },\n            })\n            window.dispatchEvent(event)\n            setConsecutiveCount(0)\n          }, 500)\n        }\n      } else {\n        setConsecutiveCount(0)\n      }\n\n      return updated\n    })\n    setSheetOpen(false)\n  }\n\n  const handleDateSelect = (date: Date) => {\n    setSelectedDate(date)\n    setView(\"day\")\n  }\n\n  const handleMonthChange = (date: Date) => {\n    setSelectedDate(date)\n  }\n\n  const handleAddTask = (newTask: Omit<Task, \"id\">) => {\n    const baseTask: Task = {\n      ...newTask,\n      id: Date.now().toString(),\n    }\n\n    if (newTask.repeatConfig?.enabled) {\n      const repeatTasks: Task[] = [baseTask]\n      const config = newTask.repeatConfig\n      const startDate = new Date(newTask.date)\n\n      let count = 0\n      const maxCount = config.count || 100\n\n      while (count < maxCount) {\n        const nextDate = new Date(startDate)\n\n        if (config.frequency === \"daily\") {\n          nextDate.setDate(startDate.getDate() + (count + 1) * config.interval)\n        } else if (config.frequency === \"weekly\") {\n          nextDate.setDate(startDate.getDate() + (count + 1) * config.interval * 7)\n        } else if (config.frequency === \"monthly\") {\n          nextDate.setMonth(startDate.getMonth() + (count + 1) * config.interval)\n        }\n\n        if (config.endDate && nextDate > new Date(config.endDate)) {\n          break\n        }\n\n        repeatTasks.push({\n          ...baseTask,\n          id: `${baseTask.id}-${count + 1}`,\n          date: nextDate.toISOString().split(\"T\")[0],\n          parentId: baseTask.id,\n        })\n\n        count++\n      }\n\n      setTasks((prev) => [...prev, ...repeatTasks])\n    } else {\n      setTasks((prev) => [...prev, baseTask])\n    }\n\n    setAddSheetOpen(false)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background pb-safe\">\n      <header className=\"sticky top-0 z-30 border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80\">\n        <div className=\"px-4 py-4 flex items-center justify-between gap-3\">\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <h1 className=\"text-lg font-bold tracking-tight text-foreground leading-tight\">\n                {view === \"day\" && selectedDate.toLocaleDateString(\"zh-CN\", { month: \"long\", day: \"numeric\" })}\n                {view === \"week\" && \"本周\"}\n                {view === \"month\" && selectedDate.toLocaleDateString(\"zh-CN\", { year: \"numeric\", month: \"long\" })}\n              </h1>\n              {view === \"day\" && <span className=\"text-base\">☀️</span>}\n            </div>\n            {view === \"day\" && (\n              <p className=\"text-xs text-muted-foreground mt-0.5 font-handwriting\">\n                {selectedDate.toLocaleDateString(\"zh-CN\", { weekday: \"long\" })}\n              </p>\n            )}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            {isAuthenticated ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <button className=\"flex items-center gap-2 rounded-full focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\n                    <Avatar className=\"h-8 w-8\">\n                      <AvatarFallback className=\"bg-primary/10 text-primary text-sm\">\n                        {user?.username?.charAt(0).toUpperCase() || \"U\"}\n                      </AvatarFallback>\n                    </Avatar>\n                  </button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-48\">\n                  <DropdownMenuLabel>\n                    <div className=\"flex flex-col\">\n                      <span className=\"font-medium\">{user?.username}</span>\n                      {user?.email && (\n                        <span className=\"text-xs text-muted-foreground\">{user.email}</span>\n                      )}\n                    </div>\n                  </DropdownMenuLabel>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={() => router.push(\"/profile\")}>\n                    <User className=\"h-4 w-4\" />\n                    <span>个人信息</span>\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem onClick={handleLogout} variant=\"destructive\">\n                    <LogOut className=\"h-4 w-4\" />\n                    <span>登出</span>\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <button\n                onClick={() => router.push(\"/login\")}\n                className=\"text-sm text-muted-foreground hover:text-foreground px-3 py-1.5 rounded-md hover:bg-muted/50 transition-colors\"\n              >\n                登录\n              </button>\n            )}\n\n            <div className=\"flex gap-1 bg-muted/40 rounded-lg p-1\">\n              <button\n                onClick={() => setView(\"day\")}\n                className={`flex items-center justify-center px-3 py-2 rounded-md text-xs font-medium transition-all active:scale-95 ${\n                  view === \"day\" ? \"bg-background text-foreground shadow-sm\" : \"text-muted-foreground\"\n                }`}\n              >\n                <Calendar className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={() => setView(\"week\")}\n                className={`flex items-center justify-center px-3 py-2 rounded-md text-xs font-medium transition-all active:scale-95 ${\n                  view === \"week\" ? \"bg-background text-foreground shadow-sm\" : \"text-muted-foreground\"\n                }`}\n              >\n                <CalendarDays className=\"h-4 w-4\" />\n              </button>\n              <button\n                onClick={() => setView(\"month\")}\n                className={`flex items-center justify-center px-3 py-2 rounded-md text-xs font-medium transition-all active:scale-95 ${\n                  view === \"month\" ? \"bg-background text-foreground shadow-sm\" : \"text-muted-foreground\"\n                }`}\n              >\n                <CalendarRange className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"px-4 py-5\">\n        {view === \"day\" && <DayView tasks={tasks} selectedDate={selectedDate} onTaskClick={handleTaskClick} />}\n        {view === \"week\" && <WeekView tasks={tasks} selectedDate={selectedDate} onTaskClick={handleTaskClick} />}\n        {view === \"month\" && (\n          <MonthView\n            tasks={tasks}\n            selectedDate={selectedDate}\n            onDateClick={handleDateSelect}\n            onMonthChange={handleMonthChange}\n            categories={categories}\n          />\n        )}\n      </main>\n\n      <div className=\"fixed bottom-6 right-6 z-20 flex flex-col gap-3\">\n        <button\n          onClick={() => setStatisticsOpen(true)}\n          className=\"w-12 h-12 rounded-full bg-gradient-to-br from-amber-500 to-orange-500 text-white shadow-lg flex items-center justify-center active:scale-95 transition-transform hover:shadow-xl\"\n        >\n          <BarChart3 className=\"h-5 w-5\" />\n        </button>\n        <button\n          onClick={() => setAIChatOpen(true)}\n          className=\"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 text-white shadow-lg flex items-center justify-center active:scale-95 transition-transform hover:shadow-xl\"\n        >\n          <Sparkles className=\"h-5 w-5\" />\n        </button>\n        <button\n          onClick={() => setAddSheetOpen(true)}\n          className=\"w-14 h-14 rounded-full bg-foreground text-background shadow-lg flex items-center justify-center active:scale-95 transition-transform hover:shadow-xl\"\n        >\n          <Plus className=\"h-6 w-6\" />\n        </button>\n      </div>\n\n      <TaskDetailSheet\n        task={selectedTask}\n        open={sheetOpen}\n        onOpenChange={setSheetOpen}\n        onComplete={handleTaskComplete}\n      />\n\n      <AddTaskSheet\n        open={addSheetOpen}\n        onOpenChange={setAddSheetOpen}\n        onAdd={handleAddTask}\n        selectedDate={selectedDate}\n        currentView={view}\n        templates={templates}\n        categories={categories}\n        onManageTemplates={() => {\n          setAddSheetOpen(false)\n          setTemplateManagerOpen(true)\n        }}\n        onManageCategories={() => {\n          setAddSheetOpen(false)\n          setCategoryManagerOpen(true)\n        }}\n      />\n\n      <TemplateManager\n        open={templateManagerOpen}\n        onOpenChange={setTemplateManagerOpen}\n        templates={templates}\n        categories={categories}\n        onSave={setTemplates}\n      />\n\n      <CategoryManager\n        open={categoryManagerOpen}\n        onOpenChange={setCategoryManagerOpen}\n        categories={categories}\n        onSave={setCategories}\n      />\n\n      <StatisticsView open={statisticsOpen} onOpenChange={setStatisticsOpen} tasks={tasks} categories={categories} />\n\n      <AIChat open={aiChatOpen} onOpenChange={setAIChatOpen} />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}